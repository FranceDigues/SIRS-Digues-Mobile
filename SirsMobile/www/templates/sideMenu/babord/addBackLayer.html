<div id="addBackLayer" ng-controller="AddBackLayerController as c" ng-form="sourceForm">
    <ion-header-bar align-title="center">
        <button type="button" class="col-20 button button-icon button-clear ion-arrow-left-a" on-tap="c.backToList()"></button>
        <h1 class="title">Ajouter une couche</h1>
    </ion-header-bar>

    <ion-content class="has-header has-fab-bottom">
        <div class="row">
            <div class="input-field col s12">
                <label for="name">Titre</label>
                <input id="name" type="text" class="validate" required ng-model="c.name"/>
            </div>
        </div>
        <div class="row">
            <div class="col s12">
                <label for="type" class="active">Type de service</label>
                <select id="type" name="type" class="browser-default"
                        ng-options="t.value as t.label for t in c.serviceTypes"
                        ng-model="c.source.type" ng-change="c.prepareType()"></select>
            </div>
        </div>
        <div class="row">
            <div class="input-field col s12">
                <label for="url" class="active">URL du service</label>
                <input id="url" type="url" class="validate" required ng-model="c.source.url"/>
            </div>
        </div>
        <div class="row" ng-if="c.source.type === 'TileWMS'">
            <div class="col s12">
                <label for="version" class="active">Version du service</label>
                <select id="version" name="version" class="browser-default"
                        ng-options="v as v for v in ['1.1.1', '1.3.0']"
                        ng-model="c.source.params.version" ng-change="c.prepareType()"></select>
            </div>
        </div>
        <div class="row" ng-if="c.source.type === 'TileWMS'">
            <div class="input-field col s12">
                <label for="layers">Couche(s) WMS</label>
                <input id="layers" type="text" class="validate" required ng-model="c.source.params.layers"/>
            </div>
        </div>
    </ion-content>

    <button type="button" class="btn-floating btn-large waves-effect waves-light pink" style="bottom: 15px; left: 200px;"
            ng-class="{disabled: sourceForm.$invalid}" ng-disabled="sourceForm.$invalid" ng-click="c.add()">
        <i class="large material-icons">check</i>
    </button>
</div>