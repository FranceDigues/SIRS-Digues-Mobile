<div ng-controller="cAppLayerMgmt as c">

    <header class="bar bar-header bar-stable">
        <button class="col-25 button button-icon button-clear ion-arrow-left-a"
                ng-click="c.sContext.backBabordMenus()"></button>
        <a class="btn-floating btn-large waves-effect waves-light yellow" style="left:50%;"><i
                class="material-icons  right" ng-click="c.toggleFilter()">search</i></a>
    </header>

    <ion-content class="has-header">

        <!--searchview-->
        <div ng-show="c.search">
            <!--//Liste des module-->


            <label class="item item-input signin-item">
                <input type="text" placeholder="recherche" ng-model="c.key">
            </label>


            <ion-item class="waves-effect waves-teal btn-flat" style="  display: block; width: 100%;"
                      ng-click="c.modList= c.modList===false?true:false"> MODULE :
            </ion-item>

            <ion-list ng-show="c.modList">
                <!--class="waves-effect waves-teal btn-flat"-->
                <ion-checkbox class="waves-effect waves-teal" ng-repeat="mod in c.sAppLayer.module"
                              style="  display: block; width: 100%;" ng-click="c.toggleMod(mod)">
                    <!--<i ng-show="c.modAct===mod" class="material-icons  right" >done</i>-->
                    Module : {{mod}}
                </ion-checkbox>

                <!--</ion-item>-->
            </ion-list>

            <ion-item class="waves-effect waves-teal btn-flat" style="  display: block; width: 100%;"
                      ng-click="c.catList= c.catList===false?true:false"> CATEGORIE :
            </ion-item>

            <!--Liste des categorie-->
            <ion-list ng-show='c.catList'>
                <!--<ion-item class="waves-effect waves-teal btn-flat"  style="  display: block; width: 100%;" ng-click="c.deepBranch(node)" ng-repeat="node in c.sAppLayer.categorie | filter:{mother:c.modAct}:true">-->
                <!--<i    class="material-icons  right" >done</i>-->
                <!--CAT {{node.title}}-->
                <!--</ion-item>-->

                <ion-checkbox class="waves-effect waves-teal"
                              ng-repeat="cat in c.sAppLayer.categorie | filter:{mother:c.modAct}:true"
                              style="  display: block; width: 100%;" ng-model="cat.checked">
                    Module : {{cat.title}}
                </ion-checkbox>

            </ion-list>
            <!--{{c.sAppLayer.categorie}}-->
        </div>
        <div style="background-color: #003399; width: 100%; height: 15px;">
        </div>


        <!--FILTRER-->
        <ion-list
                show-delete="c.shouldShowDelete"
                show-reorder="c.shouldShowReorder"
                can-swipe="c.listCanSwipe"
                ng-if="!c.noFilter" class="animate-if">
            <!--//todo why?-->
            <!--ng-include="'templates/sideMenu/babord/_listAdapter.html'"-->
            <ion-item ng-repeat="layer in c.sAppLayer.asSimpleStack|catFilter:c.sAppLayer.categorie ">
                <h2> {{layer.title}}</h2>


                <!--sous boutton-->

                <ion-option-button class="button-info"
                                   ng-click="layer.realPosition=!layer.realPosition">
                    <i class="material-icons  right">{{layer.realPosition ===true? "location_on" : "location_off"
                        }}</i>
                </ion-option-button>
                <ion-option-button class="button-info"
                                   ng-click="layer.visible=!layer.visible; c.loadDataLayer(layer);">
                    <!--bousolle like -->
                    <i class="material-icons  right">{{layer.visible ===true? "visibility" : "visibility_off" }}</i>
                </ion-option-button>
                <ion-option-button class="button-info"
                                   ng-click="layer.editable=!layer.editable">
                    <!--edit-->
                    <i class="material-icons  right">{{layer.editable ===true? "volume_up" : "volume_off" }}</i>
                </ion-option-button>

            </ion-item>
        </ion-list>


    <!--non filtrer-->
    <ion-list
            show-delete="c.shouldShowDelete"
            show-reorder="c.shouldShowReorder"
            can-swipe="c.listCanSwipe"
            ng-if="c.noFilter" class="animate-if">
        <ion-item ng-repeat="layer in c.sAppLayer.asSimpleStack ">
            <h2 class="tabStampTitle"> {{layer.title}}</h2>


                <table name="blackBox" class="tabStampContnair">

                    <tr>
                        <td  class="tabStampLine" ><i class="material-icons tiny  right">location_on</i></td>
                        <td  class="tabStampLine" ><i class="material-icons tiny  right">visibility</i></td>
                    </tr>
                    <tr>
                        <td  class="tabStampLine" > <i class="material-icons  tiny right">volume_up</i></td>
                        <td  class="tabStampLine" > <i class="material-icons  tiny right">volume_up</i></td>
                    </tr>

                </table>


            <!--sous boutton-->

            <ion-option-button class="button-info"
                               ng-click="layer.realPosition=!layer.realPosition">
                <i class="material-icons  right">{{layer.realPosition ===true? "location_on" : "location_off"}}</i>
            </ion-option-button>
            <ion-option-button class="button-info"
                               ng-click="layer.visible=!layer.visible; c.loadDataLayer(layer);">
                <!--bousolle like -->
                <i class="material-icons  right">{{layer.visible ===true? "visibility" : "visibility_off" }}</i>
            </ion-option-button>
            <ion-option-button class="button-info"
                               ng-click="layer.editable=!layer.editable">
                <!--edit-->
                <i class="material-icons  right">{{layer.editable ===true? "volume_up" : "volume_off" }}</i>
            </ion-option-button>


            <ion-delete-button ng-class="layer.fav ? 'ion-star' : 'ion-ios-star-outline' "
                               fav
                               ng-click="layer.fav= !layer.fav">
            </ion-delete-button>
            <ion-reorder-button class="ion-navicon"
                                on-reorder="c.reorderItem(layer, $fromIndex, $toIndex)">
            </ion-reorder-button>
        </ion-item>
    </ion-list>


    </ion-content>


    <!--bar bar-footer-->
    <ion-footer-bar class=" bar-positive ">
        <div class="buttons">
            <button class="button button-icon icon ion-star"
                    ng-click="c.shouldShowDelete = !c.shouldShowDelete; c.shouldShowReorder = false"></button>
        </div>
        <!--<h1 class="title">gestion calques</h1>-->

        <div class="buttons">
            <button class="button" ng-click="c.noFilter = !c.noFilter">
                <span ng-if="c.noFilter" class="animate-if">non </span>
                <span ng-if="!c.noFilter" class="animate-if">Filtr√©</span>
            </button>
        </div>

        <div class="buttons" ng-if="c.noFilter" class="animate-if">
            <button class="button" ng-click="c.shouldShowDelete = false; c.shouldShowReorder = !c.shouldShowReorder">
                Reorder
            </button>
        </div>
    </ion-footer-bar>

</div>