<div ng-controller="cAppLayerMgmt as c">

    <header class="bar bar-header bar-stable">
        <button class="col-25 button button-icon button-clear ion-arrow-left-a"
                ng-click="c.sContext.backBabordMenus()"></button>
        <a class="btn-floating btn-large waves-effect waves-light yellow" style="left:50%;"><i
                class="material-icons  right" ng-click="c.toggleFilter()">search</i></a>
    </header>

    <ion-content class="has-header">

        <!--searchview-->
        <div ng-show="c.search">
            <!--//Liste des module-->


            <label class="item item-input signin-item">
                <input type="text" placeholder="recherche" ng-model="c.key">
            </label>


            <ion-item class="waves-effect waves-teal btn-flat" style="  display: block; width: 100%;"
                      ng-click="c.modList= c.modList===false?true:false"> MODULE :
            </ion-item>

            <ion-list ng-show="c.modList">
                <!--class="waves-effect waves-teal btn-flat"-->
                <ion-checkbox class="waves-effect waves-teal" ng-repeat="mod in c.sAppLayer.module"
                              style="  display: block; width: 100%;" ng-click="c.toggleMod(mod)">
                    <!--<i ng-show="c.modAct===mod" class="material-icons  right" >done</i>-->
                    Module : {{mod}}
                </ion-checkbox>

                <!--</ion-item>-->
            </ion-list>

            <ion-item class="waves-effect waves-teal btn-flat" style="  display: block; width: 100%;"
                      ng-click="c.catList= c.catList===false?true:false"> CATEGORIE :
            </ion-item>

            <!--Liste des categorie-->
            <ion-list ng-show='c.catList'>
                <!--<ion-item class="waves-effect waves-teal btn-flat"  style="  display: block; width: 100%;" ng-click="c.deepBranch(node)" ng-repeat="node in c.sAppLayer.categorie | filter:{mother:c.modAct}:true">-->
                <!--<i    class="material-icons  right" >done</i>-->
                <!--CAT {{node.title}}-->
                <!--</ion-item>-->

                <ion-checkbox class="waves-effect waves-teal"
                              ng-repeat="cat in c.sAppLayer.categorie | filter:{mother:c.modAct}:true"
                              style="  display: block; width: 100%;" ng-model="cat.checked">
                    Module : {{cat.title}}
                </ion-checkbox>

            </ion-list>
            <!--{{c.sAppLayer.categorie}}-->
        </div>
        <div style="background-color: #003399; width: 100%; height: 15px;">
        </div>
        <!--liste globale des layers-->
        <!--<ion-list ng-show="true">-->
        <!--<ion-item   style="  display: block; width: 100%;" ng-click="c.updateBaseLayer(layer.name)"-->
        <!--ng-repeat="layer in c.sAppLayer.asSimpleStack|catFilter:c.sAppLayer.categorie"  on-swipe-left="layer.propVisible=true" ng-hide="layer.propVisible" >-->
        <!--&lt;!&ndash;ng-hide="layer.propVisible"&ndash;&gt;-->
        <!--&lt;!&ndash;ng-repeat="layer in c.sAppLayer.asSimpleStack|filter:c.catFilter">&ndash;&gt;-->


        <!--&lt;!&ndash;ng-repeat="layer in c.sAppLayer.asSimpleStack|filter:{module:c.modAct}:true">&ndash;&gt;-->

        <!--|filter:{module:c.modAct}:true|catFilter:layer:c.sAppLayer.categorie"-->
        <!--on-swipe-right="layer.propVisible=false"-->
        <!--{{layer.propVisible}}-->
        <!--<ion-item style="  display: block; width: 100%;" ng-show="layer.propVisible"-->
        <!--on-swipe-right="layer.propVisible=false">-->
        <!--<i class="material-icons  right">call_made</i>-->
        <!--<i class="material-icons  right">call_received</i>-->
        <!--&lt;!&ndash;bousolle like &ndash;&gt;-->
        <!--<i class="material-icons  right">{{layers.realPosition ===true? "location_on" : "location_off" }}</i>-->
        <!--<i class="material-icons  right">{{layers.visible ===true? "visibility" : "visibility_off" }}</i>-->
        <!--&lt;!&ndash;edit&ndash;&gt;-->
        <!--<i class="material-icons  right">{{layers.editable ===true? "volume_up" : "volume_off" }}</i>-->
        <!--&lt;!&ndash;select&ndash;&gt;-->
        <!--<i class="material-icons  right">{{layers.visible ===true? "visibility" : "visibility_off" }}</i>-->
        <!--</ion-item>-->
        <!--<i class="material-icons  right">done</i>-->
        <!--Layers {{layer}}-->
        <!--</ion-item>-->
        <!--</ion-list>-->

        <!--FILTRER-->
        <ion-list
                show-delete="c.shouldShowDelete"
                show-reorder="c.shouldShowReorder"
                can-swipe="c.listCanSwipe"
                ng-if="!c.noFilter" class="animate-if">
            <!--//todo why?-->
            <!--ng-include="'templates/sideMenu/babord/_listAdapter.html'"-->
            <ion-item ng-repeat="layer in c.sAppLayer.asSimpleStack|catFilter:c.sAppLayer.categorie ">
                <h2> {{layer.title}}</h2>


                <!--sous boutton-->
                <ion-option-button class="button-positive">
                    <i class="material-icons  right" ng-click="c.up(layer)">call_made</i>
                </ion-option-button>
                <ion-option-button class="button-positive">
                    <i class="material-icons  right" ng-click="c.down(layer)">call_received</i>
                </ion-option-button>

                <ion-option-button class="button-info"
                                   ng-click="layer.realPosition=!layer.realPosition">
                    <i class="material-icons  right">{{layer.realPosition ===true? "location_on" : "location_off"
                        }}</i>
                </ion-option-button>
                <ion-option-button class="button-info"
                                   ng-click="layer.visible=!layer.visible">
                    <!--bousolle like -->
                    <i class="material-icons  right">{{layer.visible ===true? "visibility" : "visibility_off" }}</i>
                </ion-option-button>
                <ion-option-button class="button-info"
                                   ng-click="layer.editable=!layer.editable">
                    <!--edit-->
                    <i class="material-icons  right">{{layer.editable ===true? "volume_up" : "volume_off" }}</i>
                </ion-option-button>

            </ion-item>
        </ion-list>


    <!--non filtrer-->
    <ion-list
            show-delete="c.shouldShowDelete"
            show-reorder="c.shouldShowReorder"
            can-swipe="c.listCanSwipe"
            ng-if="c.noFilter" class="animate-if">
        <ion-item ng-repeat="layer in c.sAppLayer.asSimpleStack ">
            <h2> {{layer.title}}</h2>


            <!--sous boutton-->
            <ion-option-button class="button-positive">
                <i class="material-icons  right" ng-click="c.up(layer)">call_made</i>
            </ion-option-button>
            <ion-option-button class="button-positive">
                <i class="material-icons  right" ng-click="c.down(layer)">call_received</i>
            </ion-option-button>

            <ion-option-button class="button-info"
                               ng-click="layer.realPosition=!layer.realPosition">
                <i class="material-icons  right">{{layer.realPosition ===true? "location_on" : "location_off"
                    }}</i>
            </ion-option-button>
            <ion-option-button class="button-info"
                               ng-click="layer.visible=!layer.visible">
                <!--bousolle like -->
                <i class="material-icons  right">{{layer.visible ===true? "visibility" : "visibility_off" }}</i>
            </ion-option-button>
            <ion-option-button class="button-info"
                               ng-click="layer.editable=!layer.editable">
                <!--edit-->
                <i class="material-icons  right">{{layer.editable ===true? "volume_up" : "volume_off" }}</i>
            </ion-option-button>


            <ion-delete-button class="ion-minus-circled"
                               ng-click="c.sAppLayer.asSimpleStack.splice($index, 1)">
            </ion-delete-button>
            <ion-reorder-button class="ion-navicon"
                                on-reorder="c.reorderItem(layer, $fromIndex, $toIndex)">
            </ion-reorder-button>
        </ion-item>
    </ion-list>


    </ion-content>


    <!--bar bar-footer-->
    <ion-footer-bar class=" bar-positive ">
        <div class="buttons">
            <button class="button button-icon icon ion-ios-minus-outline"
                    ng-click="c.shouldShowDelete = !c.shouldShowDelete; c.shouldShowReorder = false"></button>
        </div>
        <!--<h1 class="title">gestion calques</h1>-->

        <div class="buttons">
            <button class="button" ng-click="c.noFilter = !c.noFilter">
                <span ng-if="c.noFilter" class="animate-if">non </span>
                <span ng-if="!c.noFilter" class="animate-if">Filtr√©</span>
            </button>
        </div>

        <div class="buttons" ng-if="c.noFilter" class="animate-if">
            <button class="button" ng-click="c.shouldShowDelete = false; c.shouldShowReorder = !c.shouldShowReorder">
                Reorder
            </button>
        </div>
    </ion-footer-bar>

</div>