<ion-view id="sync">
    <ion-content>
        <div class="row responsive-md responsive-sm">
            <div class="col col-80 col-offset-10">
                <div class="sirs-card">
                    <div class="sirs-card-content">
                        <h2 class="sirs-card-title">Synchronisation avec la base distante</h2>
                        <div ng-if="c.status === 0">
                            <div class="sirs-field">
                                <span class="sirs-field-title">Nom</span>
                                <p>{{c.db.name}}</p>
                            </div>
                            <div class="sirs-field">
                                <span class="sirs-field-title">URL</span>
                                <p>{{c.db.url}}</p>
                            </div>
                            <div class="sirs-field">
                                <span class="sirs-field-title">Dernière synchronisation</span>
                                <p>{{(c.db.lastSync | date:'dd/MM/yyyy HH:mm:ss') || 'Aucune'}}</p>
                            </div>
                        </div>
                        <div ng-if="c.status === 1">
                            <p>Cette opération peut prendre quelques minutes...</p>
                            <div class="progress">
                                <div class="determinate" ng-style="{width: c.percent + '%'}"></div>
                            </div>
                            <p>{{c.view}}
                                <span class="right">{{c.completion}}</span>
                            </p>
                        </div>
                        <div ng-if="c.status === 2">
                            <p>Synchronisation effectuée avec succès.</p>
                        </div>
                        <div ng-if="c.status === 3">
                            <p>Une erreur s'est produite pendant la synchronisation.</p>
                        </div>
                    </div>
                    <div class="sirs-card-action">
                        <div ng-if="c.status === 0">
                            <a href="#/main" class="btn-flat waves-effect waves-teal">
                                <i class="material-icons left">arrow_back</i>Retour
                            </a>
                            <button type="button" class="btn pink waves-effect waves-teal right" on-tap="c.launch()">
                                <i class="material-icons left">launch</i>Lancer la synchronisation
                            </button>
                        </div>
                        <div ng-if="c.status === 1" class="text-right">
                            <button type="button" class="btn pink waves-effect waves-teal right" on-tap="c.cancelSync()">
                                <i class="material-icons left">cancel</i>Annuler la synchronisation
                            </button>
                        </div>
                        <div ng-if="c.status === 2" class="text-right">
                            <a href="#/main" class="btn pink waves-effect waves-teal">
                                <i class="material-icons left">check</i>Terminer
                            </a>
                        </div>
                        <div ng-if="c.status === 3" class="text-right">
                            <a href="#/main" class="btn-flat waves-effect waves-teal">
                                <i class="material-icons left">arrow_back</i>Abandonner
                            </a>
                            <button type="button" class="btn pink waves-effect waves-teal right" on-tap="c.launch()" >
                                <i class="material-icons left">launch</i>Réessayer
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </ion-content>
</ion-view>