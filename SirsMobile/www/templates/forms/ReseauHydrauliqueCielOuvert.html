<div class="sirs-field">
    <label for="label" class="active">Libellé</label>
    <input id="label" type="text" ng-model="c.doc.libelle"/>
</div>
<div class="row">
    <div class="sirs-field col col-50"
         ng-init="c.setupRef('typeReseauHydroCielOuvertId', c.refs.RefReseauHydroCielOuvert[0])">
        <label for="resType" class="active">Type de réseau</label>
        <div ng-if="c.showText('fullName')">
            <select id="resType" class="browser-default">
                <option ng-repeat="r in c.refs.RefReseauHydroCielOuvert track by r.id"
                        ng-value="r.id"
                        ng-model="c.doc.typeReseauHydroCielOuvertId"
                        ng-change="c.doc.typeReseauHydroCielOuvertId = r.id"
                        ng-selected="c.doc.typeReseauHydroCielOuvertId === r.id">
                    {{r.libelle ? r.libelle : (r.designation ? r.designation : r.id) }}
                </option>
            </select>
        </div>
        <div ng-if="c.showText('abstract')">
            <select id="resType" class="browser-default">
                <option ng-repeat="r in c.refs.RefReseauHydroCielOuvert track by r.id"
                        ng-value="r.id"
                        ng-model="c.doc.typeReseauHydroCielOuvertId"
                        ng-change="c.doc.typeReseauHydroCielOuvertId = r.id"
                        ng-selected="c.doc.typeReseauHydroCielOuvertId === r.id">
                    {{r.abrege ? r.abrege :(r.designation && r.libelle ? (r.designation + ' : ' + r.libelle) :
                    r.id)}}
                </option>
            </select>
        </div>
        <div ng-if="c.showText('both')">
            <select id="resType" class="browser-default">
                <option ng-repeat="r in c.refs.RefReseauHydroCielOuvert track by r.id"
                        ng-value="r.id"
                        ng-model="c.doc.typeReseauHydroCielOuvertId"
                        ng-change="c.doc.typeReseauHydroCielOuvertId = r.id"
                        ng-selected="c.doc.typeReseauHydroCielOuvertId === r.id">
                    {{r.abrege ? (r.abrege + ' : ' + r.libelle) : (r.designation && r.libelle ? (r.designation +
                    ' : ' + r.libelle) : r.id)}}
                </option>
            </select>
        </div>
    </div>
</div>
<div class="row">
    <div class="sirs-field col col-100"
         ng-init="c.setupRef('reseauHydrauliqueFermeIds', c.refs.ReseauHydrauliqueFerme[0], true)">
        <label class="active">Réseau hydraulique fermé associé</label>
        <div class="row sirs-field-multi" ng-repeat="v in c.doc.reseauHydrauliqueFermeIds track by $index">
            <div class="col col-75">
                <div ng-if="c.showText('fullName')">
                    <select class="browser-default">
                        <option ng-repeat="r in c.refs.ReseauHydrauliqueFerme track by r.id"
                                ng-value="r.id"
                                ng-model="c.doc.reseauHydrauliqueFermeIds[$index]"
                                ng-change="c.doc.reseauHydrauliqueFermeIds[$index] = r.id"
                                ng-selected="c.doc.reseauHydrauliqueFermeIds[$index] === r.id">
                            {{r.libelle ? r.libelle : (r.designation ? r.designation : r.id) }}
                        </option>
                    </select>
                </div>
                <div ng-if="c.showText('abstract')">
                    <select class="browser-default">
                        <option ng-repeat="r in c.refs.ReseauHydrauliqueFerme track by r.id"
                                ng-value="r.id"
                                ng-model="c.doc.reseauHydrauliqueFermeIds[$index]"
                                ng-change="c.doc.reseauHydrauliqueFermeIds[$index] = r.id"
                                ng-selected="c.doc.reseauHydrauliqueFermeIds[$index] === r.id">
                            {{r.abrege ? r.abrege :(r.designation && r.libelle ? (r.designation + ' : ' + r.libelle) :
                            r.id)}}
                        </option>
                    </select>
                </div>
                <div ng-if="c.showText('both')">
                    <select class="browser-default">
                        <option ng-repeat="r in c.refs.ReseauHydrauliqueFerme track by r.id"
                                ng-value="r.id"
                                ng-model="c.doc.reseauHydrauliqueFermeIds[$index]"
                                ng-change="c.doc.reseauHydrauliqueFermeIds[$index] = r.id"
                                ng-selected="c.doc.reseauHydrauliqueFermeIds[$index] === r.id">
                            {{r.abrege ? (r.abrege + ' : ' + r.libelle) : (r.designation && r.libelle ? (r.designation +
                            ' : ' + r.libelle) : r.id)}}
                        </option>
                    </select>

                    <select class="browser-default"
                            ng-model="c.doc.reseauHydrauliqueFermeIds[$index]"
                            ng-if="!r.abrege"
                            ng-options="r.id as r.designation + ' : ' + r.libelle for r in c.refs.ReseauHydrauliqueFerme">
                    </select>
                </div>
            </div>
            <div class="col col-25">
                <button class="btn pink waves-effect waves-teal"
                        ng-disabled="c.doc.reseauHydrauliqueFermeIds.length === 1"
                        ng-click="c.doc.reseauHydrauliqueFermeIds.splice($index, 1)">
                    <i class="material-icons center">remove</i>
                </button>
                <button class="btn pink waves-effect waves-teal"
                        ng-click="c.doc.reseauHydrauliqueFermeIds.splice($index + 1, 0, c.refs.ReseauHydrauliqueFerme[0].id)">
                    <i class="material-icons center">add</i>
                </button>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="sirs-field col col-50" ng-init="c.setupRef('positionId', c.refs.RefPosition[0])">
        <label for="damPosition" class="active">Position sur la digue</label>
        <div ng-if="c.showText('fullName')">
            <select id="damPosition" class="browser-default"
                    ng-model="c.doc.positionId"
                    ng-options="r.id as r.libelle for r in c.refs.RefPosition.sort(c.compareRef)">
            </select>
        </div>
        <div ng-if="c.showText('abstract')">
            <select id="damPosition" class="browser-default">
                <option ng-repeat="r in c.refs.RefPosition.sort(c.compareRef) track by r.id"
                        ng-value="r.id"
                        ng-model="c.doc.positionId"
                        ng-selected="c.doc.positionId === r.id">
                    {{r.abrege ? r.abrege : r.designation + ' : ' + r.libelle}}
                </option>
            </select>
        </div>
        <div ng-if="c.showText('both')">
            <select id="damPosition" class="browser-default">
                <option ng-repeat="r in c.refs.RefPosition.sort(c.compareRef) track by r.id"
                        ng-value="r.id"
                        ng-model="c.doc.positionId"
                        ng-selected="c.doc.positionId === r.id">
                    {{r.abrege ? (r.abrege + ' : ' + r.libelle) : (r.designation + ' : ' + r.libelle)}}
                </option>
            </select>
        </div>
    </div>
    <div class="sirs-field col col-50" ng-init="c.setupRef('coteId', c.refs.RefCote[0])">
        <label for="damSide" class="active">Côté de la digue</label>
        <div ng-if="c.showText('fullName')">
            <select id="damSide" class="browser-default"
                    ng-model="c.doc.coteId"
                    ng-options="r.id as r.libelle for r in c.refs.RefCote.sort(c.compareRef)">
            </select>
        </div>
        <div ng-if="c.showText('abstract')">
            <select id="damSide" class="browser-default">
                <option ng-repeat="r in c.refs.RefCote.sort(c.compareRef) track by r.id"
                        ng-value="r.id"
                        ng-model="c.doc.coteId"
                        ng-selected="c.doc.coteId === r.id">
                    {{r.abrege ? r.abrege : r.designation + ' : ' + r.libelle}}
                </option>
            </select>
        </div>
        <div ng-if="c.showText('both')">
            <select id="damSide" class="browser-default">
                <option ng-repeat="r in c.refs.RefCote.sort(c.compareRef) track by r.id"
                        ng-value="r.id"
                        ng-model="c.doc.coteId"
                        ng-selected="c.doc.coteId === r.id">
                    {{r.abrege ? (r.abrege + ' : ' + r.libelle) : (r.designation + ' : ' + r.libelle)}}
                </option>
            </select>
        </div>
    </div>
</div>
