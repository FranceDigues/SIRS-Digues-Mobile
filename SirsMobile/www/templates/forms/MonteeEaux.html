<div class="mesures">
    <div class="mesure-labels row" ng-init="c.doc.mesures = [c.createMeasure()]">
        <div class="sirs-field col">
            <label class="active">Référence hauteur</label>
        </div>
        <div class="sirs-field col">
            <label class="active">Hauteur</label>
        </div>
        <div class="sirs-field col col-25">
            <!-- Empty -->
        </div>
    </div>
    <div class="mesure-values row" ng-repeat="m in c.doc.mesures track by $index">
        <div class="sirs-field col">

            <div ng-if="c.showText('fullName')">
                <select class="browser-default"
                        ng-model="m.referenceHauteurId"
                        ng-options="r.id as r.libelle for r in c.refs.RefReferenceHauteur">
                </select>
            </div>

            <div ng-if="c.showText('abstract')">
                <select class="browser-default"
                        ng-model="m.referenceHauteurId"
                        ng-if="r.abrege"
                        ng-options="r.id as r.abrege for r in c.refs.RefReferenceHauteur">
                </select>

                <select class="browser-default"
                        ng-model="m.referenceHauteurId"
                        ng-if="!r.abrege"
                        ng-options="r.id as r.designation + ' : ' + r.libelle for r in c.refs.RefReferenceHauteur">
                </select>
            </div>

            <div ng-if="c.showText('both')">
                <select class="browser-default"
                        ng-model="m.referenceHauteurId"
                        ng-if="r.abrege"
                        ng-options="r.id as r.abrege + ' : ' + r.libelle for r in c.refs.RefReferenceHauteur">
                </select>

                <select class="browser-default"
                        ng-model="m.referenceHauteurId"
                        ng-if="!r.abrege"
                        ng-options="r.id as r.designation + ' : ' + r.libelle for r in c.refs.RefReferenceHauteur">
                </select>
            </div>

        </div>
        <div class="sirs-field col">
            <input type="number" ng-model="m.hauteur"/>
        </div>
        <div class="sirs-field col col-25">
            <button class="btn pink waves-effect waves-teal" ng-disabled="c.doc.mesures.length === 1"
                    ng-click="c.doc.mesures.splice($index, 1)">
                <i class="material-icons center">remove</i>
            </button>
            <button class="btn pink waves-effect waves-teal"
                    ng-click="c.doc.mesures.splice($index + 1, 0, c.createMeasure())">
                <i class="material-icons center">add</i>
            </button>
        </div>
    </div>
</div>
<div class="row">
    <div class="sirs-field col col-50" ng-init="c.setupRef('echelleLimnimetriqueId', c.refs.EchelleLimnimetrique[0])">
        <label for="scale" class="active">Echelle limnimétrique</label>

        <div ng-if="c.showText('fullName')">
            <select id="scale"  class="browser-default"
                    ng-model="c.doc.echelleLimnimetriqueId"
                    ng-options="r.id as r.libelle for r in c.refs.EchelleLimnimetrique">
            </select>
        </div>

        <div ng-if="c.showText('abstract')">
            <select id="scale" class="browser-default"
                    ng-model="c.doc.echelleLimnimetriqueId"
                    ng-if="r.abrege"
                    ng-options="r.id as r.abrege for r in c.refs.EchelleLimnimetrique">
            </select>

            <select id="scale" class="browser-default"
                    ng-model="c.doc.echelleLimnimetriqueId"
                    ng-if="!r.abrege"
                    ng-options="r.id as r.designation + ' : ' + r.libelle for r in c.refs.EchelleLimnimetrique">
            </select>
        </div>

        <div ng-if="c.showText('both')">
            <select id="scale" class="browser-default"
                    ng-model="c.doc.echelleLimnimetriqueId"
                    ng-if="r.abrege"
                    ng-options="r.id as r.abrege + ' : ' + r.libelle for r in c.refs.EchelleLimnimetrique">
            </select>

            <select id="scale" class="browser-default"
                    ng-model="c.doc.echelleLimnimetriqueId"
                    ng-if="!r.abrege"
                    ng-options="r.id as r.designation + ' : ' + r.libelle for r in c.refs.EchelleLimnimetrique">
            </select>
        </div>

    </div>
</div>
<div class="row">
    <div class="sirs-field col col-50" ng-init="c.setupRef('positionId', c.refs.RefPosition[0])">
        <label for="damPosition" class="active">Position sur la digue</label>

        <div ng-if="c.showText('fullName')">
            <select id="damPosition"  class="browser-default"
                    ng-model="c.doc.positionId"
                    ng-options="r.id as r.libelle for r in c.refs.RefPosition">
            </select>
        </div>

        <div ng-if="c.showText('abstract')">
            <select id="damPosition" class="browser-default"
                    ng-model="c.doc.positionId"
                    ng-if="r.abrege"
                    ng-options="r.id as r.abrege for r in c.refs.RefPosition">
            </select>

            <select id="damPosition" class="browser-default"
                    ng-model="c.doc.positionId"
                    ng-if="!r.abrege"
                    ng-options="r.id as r.designation + ' : ' + r.libelle for r in c.refs.RefPosition">
            </select>
        </div>

        <div ng-if="c.showText('both')">
            <select id="damPosition" class="browser-default"
                    ng-model="c.doc.positionId"
                    ng-if="r.abrege"
                    ng-options="r.id as r.abrege + ' : ' + r.libelle for r in c.refs.RefPosition">
            </select>

            <select id="damPosition" class="browser-default"
                    ng-model="c.doc.positionId"
                    ng-if="!r.abrege"
                    ng-options="r.id as r.designation + ' : ' + r.libelle for r in c.refs.RefPosition">
            </select>
        </div>

    </div>
    <div class="sirs-field col col-50" ng-init="c.setupRef('coteId', c.refs.RefCote[0])">
        <label for="damSide" class="active">Côté de la digue</label>

        <div ng-if="c.showText('fullName')">
            <select id="damSide"  class="browser-default"
                    ng-model="c.doc.coteId"
                    ng-options="r.id as r.libelle for r in c.refs.RefCote">
            </select>
        </div>

        <div ng-if="c.showText('abstract')">
            <select id="damSide" class="browser-default"
                    ng-model="c.doc.coteId"
                    ng-if="r.abrege"
                    ng-options="r.id as r.abrege for r in c.refs.RefCote">
            </select>

            <select id="damSide" class="browser-default"
                    ng-model="c.doc.coteId"
                    ng-if="!r.abrege"
                    ng-options="r.id as r.designation + ' : ' + r.libelle for r in c.refs.RefCote">
            </select>
        </div>

        <div ng-if="c.showText('both')">
            <select id="damSide" class="browser-default"
                    ng-model="c.doc.coteId"
                    ng-if="r.abrege"
                    ng-options="r.id as r.abrege + ' : ' + r.libelle for r in c.refs.RefCote">
            </select>

            <select id="damSide" class="browser-default"
                    ng-model="c.doc.coteId"
                    ng-if="!r.abrege"
                    ng-options="r.id as r.designation + ' : ' + r.libelle for r in c.refs.RefCote">
            </select>
        </div>

    </div>
</div>
